function showDebtDetails(locationId) {
			const location = locations.find(loc => loc.ID == locationId);
			const locationVisits = visits.filter(v => v.location_id == locationId && v.paid === '0');
			
			if (!location || locationVisits.length === 0) {
				showToast('לא נמצאו חובות ללקוח זה', 'info');
				return;
			}
			
			// מיון ביקורים לפי תאריך
			locationVisits.sort((a, b) => new Date(a.date) - new Date(b.date));
			
			const totalDebt = locationVisits.reduce((sum, v) => sum + parseFloat(v.amount), 0);
			
			// יצירת רשימת הביקורים
			let visitsHTML = '';
			locationVisits.forEach(visit => {
				const workDone = visit.work_done || 'לא צוין';
				const notes = visit.notes ? `<div style="color: #888; font-size: 12px; margin-top: 5px;">💭 ${visit.notes}</div>` : '';
				
				visitsHTML += `
					<div style="border: 1px solid #e9ecef; border-radius: 6px; padding: 12px; margin-bottom: 10px;">
						<div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
							<strong>📅 ${formatDate(visit.date)}</strong>
							<strong style="color: #e74c3c;">₪${parseFloat(visit.amount).toLocaleString()}</strong>
						</div>
						<div style="color: #666; font-size: 14px;">
							🔧 ${workDone}
						</div>
						${notes}
					</div>
				`;
			});
			
			// תוכן המודל
			const modalContent = `
				<div style="background: white; padding: 25px; border-radius: 12px; max-width: 500px; width: 90vw; max-height: 70vh; overflow-y: auto;">
					<h3 style="margin-bottom: 20px; color: #2c3e50;">💰 פירוט חובות - ${location.name}</h3>
					
					<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
						<strong>סה"כ חוב: ₪${totalDebt.toLocaleString()}</strong><br>
						<span style="color: #666;">מספר טיפולים: ${locationVisits.length}</span>
					</div>
					
					<div style="max-height: 300px; overflow-y: auto;">
						${visitsHTML}
					</div>
					
					<div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
						<button type="button" onclick="markDebtAsPaid(${locationId}); closeEditModal();" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
							✅ סמן כמסולק
						</button>
						<button type="button" onclick="closeEditModal()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
							❌ סגור
						</button>
					</div>
				</div>
			`;
			
			showEditModal(modalContent);
		}
